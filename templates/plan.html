{% extends "base.html" %}
{% block content %}
<h2 class="text-xl font-bold mb-4">Your Trip Plan</h2>

{% for day in plans %}
  <div class="mb-6">
    <div class="flex items-center justify-between">
  <h3 class="font-semibold">Day {{ day.day }}</h3>
  <form method="post" action="/plan/delete/{{ day.day }}" onsubmit="return confirm('Delete all items for Day {{ day.day }}?');">
    <button type="submit" class="text-red-600 hover:text-red-800 text-lg font-bold" title="Delete Day">
      &times;
    </button>
  </form>
</div>


    <ul class="list-disc pl-5">
      {% for item in day["items"] %}
        <li>
          <span class="font-medium">{{ item.time }}</span> - {{ item.title }} ({{ item.type }})<br>
          <small>{{ item.notes }}</small>
        </li>
      {% endfor %}
    </ul>
  </div>
{% endfor %}

<hr class="my-4">

<!-- Delete All Button -->
<form method="post" action="/plan/delete" onsubmit="return confirm('Are you sure you want to delete all plans?');">
  <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
    Delete All Plans
  </button>
</form>

<h3 class="font-semibold mb-2">Add to Plan</h3>
<form method="post" class="space-y-2">
  <input name="day" placeholder="Day (1, 2...)" class="border p-2 rounded w-full" required>
  <input name="time" placeholder="Time (e.g. 09:00)" class="border p-2 rounded w-full" required>
  <input name="title" placeholder="Title" class="border p-2 rounded w-full" required>
  <input name="note" placeholder="Notes" class="border p-2 rounded w-full">
  <select name="type" class="border p-2 rounded w-full">
    <option value="activity">Activity</option>
    <option value="restaurant">Restaurant</option>
    <option value="transport">Transport</option>
  </select>
  <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Add</button>
</form>
{% endblock %}
